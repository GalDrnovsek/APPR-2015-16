---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Gal Drnovšek"
output:
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
  word_document: default
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme
Odločil sem se, da bom analiziral statistiko šahovskih otvoritev, ki so bile odigrane v več kot 2 milijonih šahovskih partij. Cilj je izvedeti, katere otvoritve so statistično najboljše za igralce z belimi in igralce s črnimi figurami ter v katerih otvoritvah je največji delež remijev. Dodatno me zanima še, katere države imajo največ velemojstrov in največ velemojstrov per capita. Podatke sem pridobil na:

* http://www.becomeawordgameexpert.com/stats.htm

* https://en.wikipedia.org/wiki/List_of_chess_grandmasters_by_country

* https://en.wikipedia.org/wiki/List_of_countries_by_population_(United_Nations)


***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, results='hide', message=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

## HTML podatki

Iz prve spletne strani sem uvozil tabelo, iz katere sem dobil podatke o deležih belih zmag, črnih zmag in remijev za posamezne otvoritve. Odstranil sem vrstice s podotvoritvami glavnih otvoritev, ker so vsi podatki zajei že v glavnih otvoritvah. Odstranil sem še stolpec, v katerem so bile napisane začetne poteze posamezne otvoritve. Tip stolpcev, ki vsebujejo le številke, sem spremenil iz character v double in nastala je tabela Chess_opening_statistics s 4 stolpci:

- ime otvoritve(tip character)
- delež zmag igralcev z belimi figurami(tip double)
- delež zmag igralcev s črnimi figurami(tip double)
- delež remijev(tip double)

Nato sem tej tabeli dodal stolpec, ki pove, koliko točk od 100 partij so dosegli beli v povprečju. Iz te tabele sem vzel 10 top otvoritev za bele in dobil tabelo top_for_white z 2 stolpcema:

- ime otvoritve(tip character)
- število točk od 100 partij(tip double)

Po enakem postopku sem naredil še tabelo top_for_black.

Za otvoritve z največjim deležem remijev sem vzel 2 stolpca iz tabele Chess_opening_statistics. Top 10 takih otvoritev sem združil v tabeli most_draws, ki ima 2 stolpca:

- ime otvoritve(tip character)
- delež remijev(tip double)

Iz druge in tretje spletne strani sem uvozil tabeli s številom prebivalcev po državah oziroma številom velemojstrov po državah. V tabeli z velemojstri sem zbrisal nekaj vrstic in stolpcev ter odvečnih znakov in spremenil tip stolpca s številom velemojstrov v double. Podobno sem naredil še za tabelo s populacijo. Nato sem ti tabeli združil v tabelo GMs_and_population, ki ima 3 stolpce:

- ime države(tip character)
- število prebivalcev(tip double)
- število velemojstrov(tip double)

Tej tabeli sem dodal stolpec, ki pove, koliko velemojstrov ima posamezna država na milijon prebivalcev. Iz nje sem naredil novo tabelo z 2 stolpcema. Iz te tabele sem vzel 10 najboljših držav po velemojstrih na prebivalca in naredil tabelo top_countries s stolpcema:

- ime države(tip character)
- število velemojstrov na milijon prebivalcev(tip double)

Naredil sem še nekaj grafov iz zgornjih tabel:

```{r,echo=FALSE,message=FALSE}
graf_white
```

```{r,echo=FALSE,message=FALSE}
graf_black
```

```{r,echo=FALSE,message=FALSE}
graf_draws
```

```{r,echo=FALSE,message=FALSE}
graf_GMs
```

```{r,echo=FALSE,message=FALSE}
graf_top_coutries
```



